import random

# Bảng mã hóa: key là ký tự Hiragana/Katakana, value là danh sách các ký tự Kanji
mapping = {
    # Katakana
    'ア': ['阿'],
    'カ': ['加'],
    'サ': ['散'],
    'タ': ['多'],
    'ナ': ['奈'],
    'ハ': ['八'],
    'マ': ['末'],
    'ヤ': ['也'],
    'ラ': ['良'],
    'ワ': ['和'],
    
    'イ': ['伊'],
    'キ': ['機', '幾'],
    'シ': ['之'],
    'チ': ['千'],
    'ニ': ['仁', '二'],
    'ヒ': ['比'],
    'ミ': ['三'],
    'リ': ['利'],
    'ヰ': ['井'],

    'ウ': ['宇'],
    'ク': ['久'],
    'ス': ['須'],
    'ツ': ['州', '川'],
    'ヌ': ['奴'],
    'フ': ['不'],
    'ム': ['牟'],
    'ユ': ['由'],
    'ル': ['流'],

    'エ': ['江'],
    'ケ': ['介'],
    'セ': ['世'],
    'テ': ['天'],
    'ネ': ['祢'],
    'ヘ': ['部'],
    'メ': ['女'],
    'レ': ['礼'],
    'ヱ': ['恵'],

    'オ': ['於'],
    'コ': ['己'],
    'ソ': ['曽'],
    'ト': ['止'],
    'ノ': ['乃'],
    'ホ': ['保'],
    'モ': ['毛'],
    'ヨ': ['與', '与'],
    'ロ': ['呂'],
    'ヲ': ['乎'],

    'ン': ['尓'],

    # Hiragana
    'あ': ['安'],
    'か': ['加', '可'],
    'さ': ['左'],
    'た': ['太', '多'],
    'な': ['奈'],
    'は': ['波', '者'],
    'ま': ['末'],
    'や': ['也'],
    'ら': ['良'],
    'わ': ['和', '王'],

    'い': ['以'],
    'き': ['機', '幾', '起'],
    'し': ['之', '志'],
    'ち': ['知'],
    'に': ['仁'],
    'ひ': ['比'],
    'み': ['美'],
    'り': ['利'],
    'ゐ': ['爲', '為'],

    'う': ['宇'],
    'く': ['久'],
    'す': ['寸', '春'],
    'つ': ['川'],
    'ぬ': ['奴'],
    'ふ': ['不'],
    'む': ['武'],
    'ゆ': ['由'],
    'る': ['留'],

    'え': ['衣', '江'],
    'け': ['計'],
    'せ': ['世'],
    'て': ['天'],
    'ね': ['祢'],
    'へ': ['部'],
    'め': ['女'],
    'れ': ['礼', '連'],
    'ゑ': ['恵'],

    'お': ['於'],
    'こ': ['己', '古'],
    'そ': ['曽'],
    'と': ['止'],
    'の': ['乃', '能'],
    'ほ': ['保'],
    'も': ['毛'],
    'よ': ['与'],
    'ろ': ['呂', '路'],
    'を': ['遠'],
    
    'ん': ['无'],

    # Katakana với dakuten (hậu tố 1)
    'ガ': ['加的'],
    'ギ': ['機的', '幾的'],
    'グ': ['久的'],
    'ゲ': ['介的'],
    'ゴ': ['己的'],

    'ザ': ['散的'],
    'ジ': ['之的'],
    'ズ': ['須的'],
    'ゼ': ['世的'],
    'ゾ': ['曽的'],

    'ダ': ['多的'],
    'ヂ': ['千的'],
    'ヅ': ['州的', '川的'],
    'デ': ['天的'],
    'ド': ['止的'],

    'バ': ['八的'],
    'ビ': ['比的'],
    'ブ': ['不的'],
    'ベ': ['部的'],
    'ボ': ['保的'],

    # Katakana với handakuten (hậu tố 0)
    'パ': ['八不'],
    'ピ': ['比不'],
    'プ': ['不不'],
    'ペ': ['部不'],
    'ポ': ['保不'],

    # Hiragana với dakuten (hậu tố 1)
    'が': ['加的', '可的'],
    'ぎ': ['機的', '幾的', '起的'],
    'ぐ': ['久的'],
    'げ': ['計的'],
    'ご': ['己的', '古的'],

    'ざ': ['左的'],
    'じ': ['之的', '志的'],
    'ず': ['寸的', '春的'],
    'ぜ': ['世的'],
    'ぞ': ['曽的'],

    'だ': ['太的', '多的'],
    'ぢ': ['知的'],
    'づ': ['川的'],
    'で': ['天的'],
    'ど': ['止的'],

    'ば': ['波的', '者的'],
    'び': ['比的'],
    'ぶ': ['不的'],
    'べ': ['部的'],
    'ぼ': ['保的'],

    # Hiragana với handakuten (hậu tố 0)
    'ぱ': ['波不', '者不'],
    'ぴ': ['比不'],
    'ぷ': ['不不'],
    'ぺ': ['部不'],
    'ぽ': ['保不'],

    # Nếu cần bổ sung thêm ký tự nhỏ có tiền (ví dụ: "ゔ" – phiên bản có dakuten của "う")
    'ゔ': ['宇的'],

    # --- Các ký tự nhỏ (nhỏ = chữ lớn tương ứng) ---
    # Katakana nhỏ
    'ァ': ['阿'],
    'ィ': ['伊'],
    'ゥ': ['宇'],
    'ェ': ['江'],
    'ォ': ['於'],
    'ッ': ['州', '川'],  # dùng giá trị của 'ツ': ['州', '川']
    'ャ': ['也'],
    'ュ': ['由'],
    'ョ': ['與', '与'],

    # Hiragana nhỏ
    'ぁ': ['安'],
    'ぃ': ['以'],
    'ぅ': ['宇'],
    'ぇ': ['衣', '江'],
    'ぉ': ['於'],
    'っ': ['川'],       # dùng giá trị của 'つ': ['川']
    'ゃ': ['也'],
    'ゅ': ['由'],
    'ょ': ['与'],

    # --- Ký tự trường âm Katakana ---
    'ー': ['一'],
    '、': [',']
    

}

def encode_japanese(text):
    """
    Hàm mã hóa tiếng Nhật theo bảng chuyển đổi.
    Với mỗi ký tự trong chuỗi:
      - Nếu ký tự có trong bảng chuyển đổi: chuyển đổi sang ký tự Kanji (lựa chọn ngẫu nhiên nếu có nhiều lựa chọn).
      - Nếu không có trong bảng: giữ nguyên ký tự đó.
    """
    result = []
    for char in text:
        if char in mapping:
            result.append(random.choice(mapping[char]))
        else:
            result.append(char)
    return ''.join(result)

def main():
    input_filename = "kana.txt"
    output_filename = "kanji.txt"

    try:
        with open(input_filename, "r", encoding="utf-8") as infile:
            input_text = infile.read()
    except FileNotFoundError:
        print(f"Không tìm thấy file {input_filename}. Vui lòng kiểm tra lại!")
        return

    # Thực hiện mã hóa
    output_text = encode_japanese(input_text)

    # Ghi kết quả vào file output (tạo mới nếu chưa có)
    with open(output_filename, "w", encoding="utf-8") as outfile:
        outfile.write(output_text)

    print(f"Đã mã hóa văn bản và lưu kết quả vào file {output_filename}.")

if __name__ == '__main__':
    main()
